<?xml version="1.0" encoding="UTF-8" standalone="no" ?><!--/*****************************************************************************
				Tejas Simulator
*************************************************************************************

   Copyright 2010 Indian Institute of Technology, Delhi
   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

******************************************************************************
	Contributors:  Moksh Upadhyay, Abhishek Sagar
*****************************************************************************/-->
<Configuration>
	<Emulator>
		<EmulatorType>0</EmulatorType> <!-- 0-pin,1-qemu-->
		<CommunicationType>1</CommunicationType>  <!--0-file, 1-shmem, 2-socket -->
		<PinTool>/mnt/srishtistr0/home/anuj/PIN</PinTool>
		<PinInstrumentor>/mnt/srishtistr0/home/mayur/workspace/Tejas/src/emulator/pin/obj-pin/causalityTool.so</PinInstrumentor>
		<QemuTool>/home/prathmesh/workspace/qemu/x86_64-linux-user/qemu-x86_64 /home/prathmesh/tmp/testQemu.o</QemuTool>
		<ShmLibDirectory>/mnt/srishtistr0/home/anuj/workspace/Tejas/src/emulator/pin/obj-comm</ShmLibDirectory>
	</Emulator>
	
	<!--Simulation Parameters-->
	<Simulation>
		<CollectInsnWorkingSet>false</CollectInsnWorkingSet> 
		<InsnWorkingSetChunkSize>3000000</InsnWorkingSetChunkSize> <!--Chunk size of instructions over which working set must be noted-->
		
		<CollectDataWorkingSet>false</CollectDataWorkingSet>
		<DataWorkingSetChunkSize>3000000</DataWorkingSetChunkSize> <!--Chunk size of instructions over which working set must be noted-->
		
		<NumTempIntReg>16</NumTempIntReg>			<!--Number of temporary Integer registers-->
		<IndexAddrModeEnable>0</IndexAddrModeEnable>		<!--Indexed addressing mode Enabled or disabled (Write 1 for YES, 0 for NO)-->
		<EmuCores>0</EmuCores>					<!--The cores on which emulator will run(supports ',' and '-' for ranges)-->
		<JavaCores>1</JavaCores>				<!--The cores on which simulator will run(supports ',' and '-' for ranges)-->
		<DebugMode>false</DebugMode>				<!--True if debug related printing is desired-->
		<DetachMemSys>false</DetachMemSys>		<!--True to detach memory system-->
		<InstructionsFilename>/mnt/srishtistr0/home/nitingupta/workspace/TejasQemuTraces/linux_iozone_trace</InstructionsFilename><!-- The file in which instructions are written -->
		<numInstructionsToBeWritten>1000000</numInstructionsToBeWritten>
		<writeToFile>false</writeToFile>
		<PrintPowerStats>true</PrintPowerStats>
		<Broadcast>false</Broadcast>
		<PowerTrace>1</PowerTrace>			<!--0 => no power trace; 1=> trace after 'n' instructions ;2=> trace after 'n' cycles-->
		<pinpointsSim>false</pinpointsSim>
		<pinpointsFile>/mnt/srishtistr0/scratch/rajshekar/tejas/PinPoints_working_directory/soplex.test.Data/t.sorted</pinpointsFile>
		<NumInsToIgnore>0</NumInsToIgnore>	<!--Ignores these many profilable instructions from the start of the program-->
		<NumInsForTrace>10</NumInsForTrace>		<!--Power trace will be populated after every "NumInsForTrace" instructions-->
		<NumCyclesForTrace>1000000</NumCyclesForTrace>		<!--Power trace will be populated after every "NumCyclesForTrace" cycles-->
		<subsetSim>true</subsetSim>
		<subsetSimSize>50000000</subsetSimSize>
		<markerFunctions>false</markerFunctions>
		<startSimMarker>XXX_startInstrumentation</startSimMarker>
		<endSimMarker>XXX_endInstrumentation</endSimMarker>
	</Simulation>

	<!--System Parameters-->
	<System>
		<NoOfCores>4</NoOfCores>				<!--(!!!Not used!!!) Number of cores in the simulated system-->
		
		<MainMemory>
			<MainMemoryLatency>200</MainMemoryLatency>		<!--The latency of main memory (in clock cycles)-->
			<MainMemoryFrequency>3600</MainMemoryFrequency>		<!--Operating frequency of the main memory (in MHz)-->
			<MainMemoryPortType>FCFS</MainMemoryPortType>		<!--Type of access ports in the Main Memory (UL : Unlimited; FCFS : First Come First Serve; PR : Priority port)-->
			<MainMemoryAccessPorts>1</MainMemoryAccessPorts>	<!--Number of access ports in the Main Memory-->
			<MainMemoryPortOccupancy>1</MainMemoryPortOccupancy>	<!--The occupancy of the Main Memory ports (in clock cycles)-->
			<LeakagePower>0.0073</LeakagePower>
			<DynamicPower>0.0544</DynamicPower>
		</MainMemory>
		
		<CacheBusLatency>1</CacheBusLatency>			<!--Latency of the RING used for broadcasting messages for cache coherence-->
		
		<GlobalClock>
			<LeakagePower>0.3456</LeakagePower>
			<DynamicPower>0.2886</DynamicPower>
		</GlobalClock>
			
		<!--Core Parameters-->
		<Core>
			<CoreFrequency>3400</CoreFrequency>		<!--Operating frequency of the core (in MHz)-->
			<PipelineType>outOfOrder</PipelineType>	<!--inOrder,outOfOrder(set issue width for multi-issue in-order)-->
			
			<BranchPredictor>
				<Predictor_Mode>GShare</Predictor_Mode>	<!-- Legal Values are NoPredictor, PerfectPredictor, AlwaysTaken, AlwaysNotTaken, Tournament, Bimodal, GAg, GAp, GShare, PAg, PAp -->
				<PCBits>4</PCBits>
				<BHRsize>4</BHRsize>
				<BranchMispredPenalty>8</BranchMispredPenalty>	<!--Branch misprediction penalty-->
				<SaturatingBits>1</SaturatingBits>
				<LeakagePower>0.0178</LeakagePower>
				<DynamicPower>0.0962</DynamicPower>
			</BranchPredictor>			
			
			<LSQ>
				<LSQSize>64</LSQSize>				<!--Maximum number of entries in the LSQ-->
				<LSQLatency>0</LSQLatency>			<!--In clock cycles-->
				<LSQPortType>UL</LSQPortType>			<!--Type of access ports in the LSQ (UL : Unlimited; FCFS : First Come First Serve; PR : Priority port)-->
				<LSQAccessPorts>-1</LSQAccessPorts>		<!--Number of access ports in the LSQ-->
				<LSQPortOccupancy>-1</LSQPortOccupancy>		<!--The occupancy of the LSQ ports (in clock cycles)-->
				<LSQMultiPortingType>B</LSQMultiPortingType>	<!--Multi-porting option used in the LSQ('G' for GENUINE and 'B' for BANKED)-->
				<LeakagePower>0.0318</LeakagePower>
				<DynamicPower>0.1725</DynamicPower>
			</LSQ>

			<ITLB>
				<Size>128</Size>				<!--Maximum number of entries in the ITLB-->
				<Latency>4</Latency>			<!--In clock cycles-->
				<MissPenalty>10</MissPenalty>			<!--In clock cycles-->
				<PortType>UL</PortType>			<!--Type of access ports in the ITLB (UL : Unlimited; FCFS : First Come First Serve; PR : Priority port)-->
				<AccessPorts>-1</AccessPorts>		<!--Number of access ports in the ITLB-->
				<PortOccupancy>-1</PortOccupancy>		<!--The occupancy of the ITLB ports (in clock cycles)-->
				<LeakagePower>0.00546275</LeakagePower>
				<DynamicPower>0.06792852941</DynamicPower>
			</ITLB>
			
			<DTLB>
				<Size>128</Size>				<!--Maximum number of entries in the DTLB-->
				<Latency>4</Latency>			<!--In clock cycles-->
				<MissPenalty>10</MissPenalty>			<!--In clock cycles-->
				<PortType>UL</PortType>			<!--Type of access ports in the ITLB (UL : Unlimited; FCFS : First Come First Serve; PR : Priority port)-->
				<AccessPorts>-1</AccessPorts>		<!--Number of access ports in the ITLB-->
				<PortOccupancy>-1</PortOccupancy>		<!--The occupancy of the ITLB ports (in clock cycles)-->
				<LeakagePower>0.00546275</LeakagePower>
				<DynamicPower>0.06792852941</DynamicPower>
			</DTLB>
			
			<Decode>								<!--Instruction decode-->
				<Width>4</Width>			
				<LeakagePower>0.0598</LeakagePower>
				<DynamicPower>0.0347</DynamicPower>
			</Decode>
			
			<Rename>
				<RAT>
					<Integer>
						<LeakagePower>0.0045</LeakagePower>
						<DynamicPower>0.0150</DynamicPower>
					</Integer>
					<Float>
						<LeakagePower>0.0017</LeakagePower>
						<DynamicPower>0.0130</DynamicPower>
					</Float>
				</RAT>
				<FreeList>
					<Integer>
						<LeakagePower>0.0016</LeakagePower>
						<DynamicPower>0.0085</DynamicPower>
					</Integer>
					<Float>
						<LeakagePower>0.0030</LeakagePower>
						<DynamicPower>0.0045</DynamicPower>
					</Float>
				</FreeList>
			</Rename>
			
			<InstructionWindow>
				<IssueWidth>4</IssueWidth>			<!--Instruction issue width-->
				<IWSize>54</IWSize>				<!--Maximum number of entries in the Instruction Window-->
				<LeakagePower>0.0046</LeakagePower>
				<DynamicPower>0.0142</DynamicPower>
			</InstructionWindow>
			
			<ROB>
				<RetireWidth>4</RetireWidth>			<!--Instruction retire width-->
				<ROBSize>168</ROBSize>				<!--Maximum number of entries in the ROB-->
				<LeakagePower>0.0058</LeakagePower>
				<DynamicPower>0.0304</DynamicPower>
			</ROB>

			<RegisterFile>
				<Integer>
					<IntRegFileSize>160</IntRegFileSize>		<!--Maximum number of entries in the Integer register file-->
					<IntArchRegNum>32</IntArchRegNum>		<!--Number of Integer architectural registers-->
					<LeakagePower>0.0108</LeakagePower>
					<DynamicPower>0.0572</DynamicPower>
				</Integer>
				
				<Float>
					<FloatRegFileSize>144</FloatRegFileSize>		<!--Maximum number of entries in the Floating point register file-->
					<FloatArchRegNum>32</FloatArchRegNum>		<!--Number of Floating point architectural registers-->
					<LeakagePower>0.0075</LeakagePower>
					<DynamicPower>0.0207</DynamicPower>
				</Float>
				
			</RegisterFile>
			
			<IntALU>
				<IntALUNum>4</IntALUNum>			<!--Number of Integer ALUs-->
				<IntALULatency>1</IntALULatency>		<!--Latency of Integer ALUs-->
				<LeakagePower>0.0542</LeakagePower>
				<DynamicPower>0.3257</DynamicPower>			
			</IntALU>
			
			<FloatALU>
				<FloatALUNum>2</FloatALUNum>			<!--Number of Floating Point ALUs-->
				<FloatALULatency>2</FloatALULatency>		<!--Latency of Floating Point ALUs-->
				<LeakagePower>0.0654</LeakagePower>
				<DynamicPower>0.5366</DynamicPower>			
			</FloatALU>
			
			<ComplexALU>
				<IntMulNum>1</IntMulNum>			<!--Number of Integer Multipliers-->
				<IntDivNum>1</IntDivNum>			<!--Number of Integer Dividers-->
				<FloatMulNum>1</FloatMulNum>			<!--Number of Floating Point Multipliers-->
				<FloatDivNum>1</FloatDivNum>			<!--Number of Floating Point Dividers-->
				<IntMulLatency>2</IntMulLatency>		<!--Latency of Integer Multipliers-->
				<IntDivLatency>4</IntDivLatency>		<!--Latency of Integer Dividers-->
				<FloatMulLatency>4</FloatMulLatency>		<!--Latency of Floating Point Multipliers-->
				<FloatDivLatency>8</FloatDivLatency>		<!--Latency of Floating Point Dividers-->
				<LeakagePower>0.0271</LeakagePower>
				<DynamicPower>0.6514</DynamicPower>
			</ComplexALU>
			
			<ResultsBroadcastBus>
				<LeakagePower>0.0239</LeakagePower>
				<DynamicPower>0.5948</DynamicPower>
			</ResultsBroadcastBus>
			
			<TreeBarrier>false</TreeBarrier>			<!--Only for particular purposes. Otherwise keep it as false-->
			<BarrierLatency>2</BarrierLatency>
			<BarrierUnit>Distributed</BarrierUnit>			<!--Central and distributed-->
			<!--Specify only the iCache and L1 (immediately next to the core) cache of the core here-->
			<iCache nextLevel="L2" type="Type0"/>
			<L1Cache nextLevel="L2" type="Type1"/>
			<!--L2Cache type = "Type2"/-->
			<!--L3Cache type = "Type3"/-->
		</Core>
		<Interconnect>Noc</Interconnect>
		<NOC>
			<!--If you want to use NOC for any  other elements like core, L1 , add it here using a tag -->
			<L2>
				<NocConfigFile>/mnt/srishtistr0/home/anuj/workspace/Tejas/src/simulator/config/NocConfig.txt</NocConfigFile>
				<NucaMapping>S</NucaMapping> <!-- S: Set-Associative A: Address-Mapped -->
				<NocSelScheme>STATIC</NocSelScheme>
				<NocNumberOfBuffers>4</NocNumberOfBuffers>
				<NocPortType>UL</NocPortType>
				<NocAccessPorts>-1</NocAccessPorts>
				<NocPortOccupancy>-1</NocPortOccupancy>
				<NocLatency>1</NocLatency>
				<NocOperatingFreq>2000</NocOperatingFreq>
				<NocTopology>MESH</NocTopology>     <!--NOCTopology-->
				<NocRoutingAlgorithm>SIMPLE</NocRoutingAlgorithm>
				<NocLatencyBetweenBanks>2</NocLatencyBetweenBanks>
				<NocRouterArbiter>RR</NocRouterArbiter>
				<TechPoint>90</TechPoint>
				<NocConnection>ELECTRICAL</NocConnection>
			</L2>
			
			<LeakagePower>0.1877</LeakagePower>
			<DynamicPower>2.1164</DynamicPower>
		</NOC>
		
		<Directory>
			<Type0>
				<WriteMode>WB</WriteMode>			<!--Write-back (WB) or write-through (WT)-->
				<LastLevel>N</LastLevel>			<!--Whether this is the last level in the hierarchy or not (Y for yes, N for no)-->
				<BlockSize>64</BlockSize>			<!--In bytes (this should be same as the block size of the Caches between those you want coherence)-->
				<Associativity>8</Associativity>
				<Size>32</Size>					<!--In KBs-->
				<Latency>4</Latency>				<!--In clock cycles-->
				<PortType>FCFS</PortType>				<!--Type of access ports in the Cache (UL : Unlimited; FCFS : First Come First Serve; PR : Priority port)-->
				<AccessPorts>2</AccessPorts>			<!--Number of access ports in the Cache-->
				<PortOccupancy>1</PortOccupancy>		<!--The occupancy of the cache ports (in clock cycles)-->
				<MultiPortingType>B</MultiPortingType>		<!--Multi-porting option used in the Cache('G' for GENUINE and 'B' for BANKED)-->
				<Coherence>N</Coherence>			<!--Coherence of upper level (N : None, S : Snoopy, D : Directory)-->
				<NumBuses>1</NumBuses>			<!--Coherence of upper level (N : None, S : Snoopy, D : Directory)-->
				<MSHRSize>2</MSHRSize>
				<BusOccupancy>0</BusOccupancy>
				<Nuca>N</Nuca>						<!--NUCA type (S : S-NUCA, D : D-NUCA, N : None)-->
				<LeakagePower>.1092</LeakagePower>
				<ReadDynamicPower>.3396</ReadDynamicPower>
				<WriteDynamicPower>.3396</WriteDynamicPower>
			</Type0>
			
			<directoryAccessLatency>2</directoryAccessLatency>
			<memWBDelay>200</memWBDelay>
			<dataTransferDelay>3</dataTransferDelay>
			<invalidationSendDelay>3</invalidationSendDelay>
			<invalidationAckCollectDelay>3</invalidationAckCollectDelay>
			<ownershipChangeDelay>3</ownershipChangeDelay>
			<dirNetworkDelay>1</dirNetworkDelay>
		</Directory>
		
		<!--Specify the caches other than the L1 caches after this-->
		<Cache frequency="2000" name="L2" nextLevel="" type="Type2"/>

		<CoherenceEnforcingCache>L2</CoherenceEnforcingCache>	<!--NAME of the cache whose immediate upper caches are coherent-->
	</System>

	<!--Give all the library elements here-->
	<Library>
		<Type0>
			<WriteMode>WB</WriteMode>			<!--Write-back (WB) or write-through (WT)-->
			<LastLevel>N</LastLevel>			<!--Whether this is the last level in the hierarchy or not (Y for yes, N for no)-->
			<BlockSize>64</BlockSize>			<!--In bytes-->
			<Associativity>8</Associativity>
			<Size>32</Size>					<!--In KBs-->
			<Latency>2</Latency>				<!--In clock cycles-->
			<PortType>UL</PortType>				<!--Type of access ports in the Cache (UL : Unlimited; FCFS : First Come First Serve; PR : Priority port)-->
			<AccessPorts>1</AccessPorts>			<!--Number of access ports in the Cache-->
			<PortOccupancy>1</PortOccupancy>		<!--The occupancy of the cache ports (in clock cycles)-->
			<MultiPortingType>B</MultiPortingType>		<!--Multi-porting option used in the Cache('G' for GENUINE and 'B' for BANKED)-->
			<Coherence>N</Coherence>			<!--Coherence of upper level (N : None, S : Snoopy, D : Directory)-->
			<NumBuses>1</NumBuses>			<!--Coherence of upper level (N : None, S : Snoopy, D : Directory)-->
			<MSHRSize>32</MSHRSize>
			<BusOccupancy>0</BusOccupancy>
			<Nuca>N</Nuca>						<!--NUCA type (S : S-NUCA, D : D-NUCA, N : None)-->
			<LeakagePower>0.1092</LeakagePower>
			<ReadDynamicPower>0.33964264705</ReadDynamicPower>
			<WriteDynamicPower>0.33964264705</WriteDynamicPower>
		</Type0>
		<Type1>
			<WriteMode>WB</WriteMode>			<!--Write-back (WB) or write-through (WT)-->
			<LastLevel>N</LastLevel>			<!--Whether this is the last level in the hierarchy or not (Y for yes, N for no)-->
			<BlockSize>64</BlockSize>			<!--In bytes-->
			<Associativity>8</Associativity>
			<Size>32</Size>					<!--In KBs-->
			<Latency>2</Latency>				<!--In clock cycles-->
			<PortType>FCFS</PortType>				<!--Type of access ports in the Cache (UL : Unlimited; FCFS : First Come First Serve; PR : Priority port)-->
			<AccessPorts>1</AccessPorts>			<!--Number of access ports in the Cache-->
			<PortOccupancy>2</PortOccupancy>		<!--The occupancy of the cache ports (in clock cycles)-->
			<MultiPortingType>B</MultiPortingType>		<!--Multi-porting option used in the Cache('G' for GENUINE and 'B' for BANKED)-->
			<Coherence>D</Coherence>			<!--Coherence of upper level (N : None, S : Snoopy, D : Directory)-->
			<NumBuses>1</NumBuses>			<!--Coherence of upper level (N : None, S : Snoopy, D : Directory)-->
			<MSHRSize>32</MSHRSize>
			<BusOccupancy>0</BusOccupancy>
			<Nuca>N</Nuca>						<!--NUCA type (S : S-NUCA, D : D-NUCA, N : None)-->
			<LeakagePower>0.1092</LeakagePower>
			<ReadDynamicPower>0.33964264705</ReadDynamicPower>
			<WriteDynamicPower>0.33964264705</WriteDynamicPower>
		</Type1>
		<Type2>
			<WriteMode>WB</WriteMode>			<!--Write-back (WB) or write-through (WT)-->
			<LastLevel>Y</LastLevel>			<!--Whether this is the last level in the hierarchy or not (Y for yes, N for no)-->
			<BlockSize>64</BlockSize>			<!--In bytes-->
			<Associativity>16</Associativity>
			<Size>8192</Size>				<!--In KBs-->
			<Latency>45</Latency>				<!--In clock cycles-->
			<PortType>UL</PortType>				<!--Type of access ports in the Cache (UL : Unlimited; FCFS : First Come First Serve; PR : Priority port)-->
			<AccessPorts>2</AccessPorts>			<!--Number of access ports in the Cache-->
			<PortOccupancy>2</PortOccupancy>		<!--The occupancy of the cache ports (in clock cycles)-->
			<MultiPortingType>B</MultiPortingType>		<!--Multi-porting option used in the Cache('G' for GENUINE and 'B' for BANKED)-->
			<Coherence>N</Coherence>			<!--Coherence of upper level (N : None, S : Snoopy, D : Directory)-->
			<NumBuses>1</NumBuses>				<!--Coherence of upper level (N : None, S : Snoopy, D : Directory)-->
			<MSHRSize>8</MSHRSize>
			<BusOccupancy>0</BusOccupancy>
			<Nuca>S</Nuca>						<!--NUCA type (S : S-NUCA, D : D-NUCA, N : None)-->
			<LeakagePower>0.65904632352</LeakagePower>
			<ReadDynamicPower>0.81449264705</ReadDynamicPower>
			<WriteDynamicPower>0.81449264705</WriteDynamicPower>
		</Type2>
		<Type3>
			<WriteMode>WB</WriteMode>			<!--Write-back (WB) or write-through (WT)-->
			<LastLevel>Y</LastLevel>			<!--Whether this is the last level in the hierarchy or not (Y for yes, N for no)-->
			<BlockSize>64</BlockSize>			<!--In bytes-->
			<Associativity>8</Associativity>
			<Size>256</Size>				<!--In KBs-->
			<Latency>8</Latency>				<!--In clock cycles-->
			<PortType>FCFS</PortType>				<!--Type of access ports in the Cache (UL : Unlimited; FCFS : First Come First Serve; PR : Priority port)-->
			<AccessPorts>1</AccessPorts>			<!--Number of access ports in the Cache-->
			<PortOccupancy>4</PortOccupancy>		<!--The occupancy of the cache ports (in clock cycles)-->
			<MultiPortingType>B</MultiPortingType>		<!--Multi-porting option used in the Cache('G' for GENUINE and 'B' for BANKED)-->
			<Coherence>N</Coherence>			<!--Coherence of upper level (N : None, S : Snoopy, D : Directory)-->
			<NumBuses>1</NumBuses>		<!--Coherence of upper level (N : None, S : Snoopy, D : Directory)-->
			<MSHRSize>32</MSHRSize>
			<BusOccupancy>10</BusOccupancy>
			<Nuca>N</Nuca>						<!--NUCA type (S : S-NUCA, D : D-NUCA, N : None)-->			
			<LeakagePower>0.1753</LeakagePower>
			<ReadDynamicPower>0.34905735294</ReadDynamicPower>
			<WriteDynamicPower>0.34905735294</WriteDynamicPower>
		</Type3>
	</Library>
	
</Configuration>
